<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GSAPの基本構文と例</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />
  </head>
  <body>
    <header>
      <h1>GSAPの基本構文と例</h1>
    </header>

    <nav>
      <ul>
        <li><a href="../index.html">ホーム</a></li>
        <li><a href="../01_introduction/01_introduction.html">概要</a></li>
        <li><a href="../02_benefits/02_benefits.html">メリット</a></li>
        <li><a href="../03_good_animation/03_good_animation.html">良いアニメーション</a></li>
        <li><a href="../04_basic_syntax/04_basic_syntax.html" class="active">基本構文と例</a></li>
        <li class="dropdown">
          <a href="#">コードサンプル</a>
          <div class="dropdown-content">
            <a href="../05_examples/01_button_hover.html">ボタンホバー</a>
            <a href="../05_examples/02_timeline_sequence.html">タイムライン</a>
            <a href="../05_examples/03_scroll_fade_in.html">スクロールフェード</a>
            <a href="../05_examples/04_scroll_progress.html">スクロール連動</a>
            <a href="../05_examples/05_stagger_animation.html">スタッガー</a>
          </div>
        </li>
      </ul>
    </nav>

    <div class="container">
      <p> GSAPの基本的な使い方を学びましょう。 GSAPは直感的なAPIで、少ないコードで豊かなアニメーションを実現できます。 </p>

      <!-- セクション1: GSAPの導入 -->
      <div class="section">
        <h2>1. GSAPの導入方法</h2>

        <h3>CDNからの読み込み</h3>
        <p> 最も簡単な導入方法は、CDNを使用してGSAPのライブラリを読み込むことです： </p>
        <pre><code class="language-html" id="cdn-code">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"&gt;&lt;/script&gt;</code><button class="copy-button">コピー</button></pre>

        <h3>npm経由でのインストール</h3>
        <p> プロジェクトでnpmを使用している場合： </p>
        <pre><code class="language-bash" id="npm-code">npm install gsap</code><button class="copy-button">コピー</button></pre>

        <p> そして、JavaScriptファイルで以下のようにインポートします： </p>
        <pre><code class="language-javascript" id="import-code">import { gsap } from "gsap";</code><button class="copy-button">コピー</button></pre>
      </div>

      <!-- セクション2: 基本的なアニメーション -->
      <div class="section">
        <h2>2. 基本的なアニメーション：gsap.to()</h2>

        <p> <code>gsap.to()</code>メソッドは最も基本的なアニメーションメソッドです。 ある要素を<strong>現在の状態から指定された状態へ</strong>アニメーションさせます。 </p>

        <div class="demo-container">
          <h3>gsap.to() のデモ</h3>
          <div class="box-container">
            <div class="box" id="to-box"></div>
          </div>

          <div class="controls">
            <button id="run-to">実行</button>
            <button id="reset-to">リセット</button>
          </div>

          <h4>gsap.to() のコード</h4>
          <pre><code class="language-javascript" id="to-code">// 現在の状態から指定した状態へアニメーション
gsap.to("#to-box", {
  x: 300,         // x方向に300px移動
  rotation: 360,  // 360度回転
  backgroundColor: "#e74c3c", // 色を変更
  duration: 2,    // 2秒かけて実行
  ease: "power2.out" // イージング
});</code><button class="copy-button">コピー</button></pre>
        </div>

        <h3>基本的な構文</h3>
        <pre><code class="language-javascript" id="basic-syntax">gsap.to(targets, {
  // アニメーションさせたいプロパティと値
  x: 100,         // x方向に100pxの移動
  y: 50,          // y方向に50pxの移動
  rotation: 360,   // 360度の回転
  duration: 1,     // アニメーション時間（秒）
  ease: "power2.out", // イージング
  delay: 0.5,      // 遅延時間（秒）
  // その他のオプション...
});</code><button class="copy-button">コピー</button></pre>

        <h3>パラメータの説明</h3>
        <ul>
          <li><code>targets</code>: アニメーションさせたい要素（CSSセレクタ、DOM要素、配列など）</li>
          <li>
            <code>{}</code>: 変数オブジェクト（アニメーションの設定を含む）
            <ul>
              <li><code>duration</code>: アニメーションの時間（秒）</li>
              <li><code>delay</code>: アニメーション開始までの遅延時間（秒）</li>
              <li><code>ease</code>: イージング関数（速度変化のパターン）</li>
              <li>その他のプロパティ: アニメーションさせたいCSS値</li>
            </ul>
          </li>
        </ul>
      </div>

      <!-- セクション3: その他の基本メソッド -->
      <div class="section">
        <h2>3. その他の基本アニメーションメソッド</h2>

        <h3>gsap.from()</h3>
        <p> <code>gsap.from()</code>は<strong>指定された初期状態から現在の状態へ</strong>アニメーションさせます。 </p>

        <div class="demo-container">
          <h3>gsap.from() のデモ</h3>
          <div class="box-container">
            <div class="box" id="from-box"></div>
          </div>

          <div class="controls">
            <button id="run-from">実行</button>
            <button id="reset-from">リセット</button>
          </div>

          <h4>gsap.from() のコード</h4>
          <pre><code class="language-javascript" id="from-code">// 指定した初期状態から現在の状態へアニメーション
gsap.from("#from-box", {
  x: -100,        // x方向に-100pxの位置から
  y: -50,         // y方向に-50pxの位置から
  opacity: 0,     // 透明な状態から
  scale: 0.5,     // 半分のサイズから
  rotation: -180, // -180度回転した状態から
  duration: 2,    // 2秒かけて実行
  ease: "power2.out" // イージング
});</code><button class="copy-button">コピー</button></pre>
        </div>

        <h3>gsap.fromTo()</h3>
        <p> <code>gsap.fromTo()</code>は<strong>指定された初期状態から指定された終了状態へ</strong>アニメーションさせます。 </p>

        <div class="demo-container">
          <h3>gsap.fromTo() のデモ</h3>
          <div class="box-container">
            <div class="box" id="fromto-box"></div>
          </div>

          <div class="controls">
            <button id="run-fromto">実行</button>
            <button id="reset-fromto">リセット</button>
          </div>

          <h4>gsap.fromTo() のコード</h4>
          <pre><code class="language-javascript" id="fromto-code">// 指定した初期状態から指定した終了状態へアニメーション
gsap.fromTo("#fromto-box",
  // 開始状態
  {
    x: -100,
    y: -50,
    opacity: 0,
    backgroundColor: "#9b59b6"
  },
  // 終了状態
  {
    x: 300,
    y: 0,
    opacity: 1,
    backgroundColor: "#2ecc71",
    duration: 2,
    ease: "power2.inOut"
  }
);</code><button class="copy-button">コピー</button></pre>
        </div>
      </div>

      <!-- セクション4: タイムライン -->
      <div class="section">
        <h2>4. タイムライン：アニメーションの連続再生</h2>

        <p> タイムラインを使うと、複数のアニメーションを順番に、または同時に実行する複雑なシーケンスを作成できます。 </p>

        <div class="demo-container">
          <h3>タイムラインのデモ</h3>
          <div class="box-container" style="height: 200px">
            <div class="box" id="timeline-box1" style="top: 25px"></div>
            <div class="box box-red" id="timeline-box2" style="top: 75px"></div>
            <div class="box box-green" id="timeline-box3" style="top: 125px"></div>
          </div>

          <div class="controls">
            <button id="run-timeline">実行</button>
            <button id="reset-timeline">リセット</button>
          </div>

          <h4>タイムラインのコード</h4>
          <pre><code class="language-javascript" id="timeline-code">// タイムラインの作成
const tl = gsap.timeline({
  defaults: {
    duration: 1,
    ease: "power2.out"
  }
});

// アニメーションを連続して追加
tl.to("#timeline-box1", { x: 300 })
  .to("#timeline-box2", { x: 300, y: 30 }, "-=0.5") // 0.5秒オーバーラップ
  .to("#timeline-box3", { x: 300, rotation: 360 }, "&lt;"); // 前のアニメーションと同時</code><button class="copy-button">コピー</button></pre>
        </div>

        <h3>アニメーションの位置指定</h3>
        <p> タイムラインでは、各アニメーションの開始タイミングを細かく制御できます。 </p>

        <pre><code class="language-javascript" id="timeline-position">// タイムラインの作成
const tl = gsap.timeline();

// 連続するアニメーション
tl.to(".box1", { x: 100, duration: 1 })
  // box1の0.5秒後に開始
  .to(".box2", { y: 50, duration: 1 }, "-=0.5")
  // box2と同時に開始
  .to(".box3", { rotation: 360, duration: 1 }, "&lt;")
  // box3の終了から1秒後に開始
  .to(".box4", { scale: 1.5, duration: 1 }, "+=1");</code><button class="copy-button">コピー</button></pre>

        <h3>ポジションパラメータ</h3>
        <ul>
          <li><code>"-=0.5"</code>: 前のアニメーションの終了時間から0.5秒前に開始</li>
          <li><code>"+=0.5"</code>: 前のアニメーションの終了時間から0.5秒後に開始</li>
          <li><code>"&lt;"</code>: 前のアニメーションと同時に開始</li>
          <li><code>"&gt;"</code>: 前のアニメーションの終了時に開始（デフォルト）</li>
          <li><code>2</code>: タイムライン開始から2秒後に開始（絶対時間）</li>
        </ul>
      </div>

      <!-- セクション5: イージング -->
      <div class="section">
        <h2>5. イージング関数</h2>

        <p> イージング関数はアニメーションの速度変化のパターンを定義します。 GSAPでは多様なイージング関数が用意されています。 </p>

        <div class="demo-container">
          <h3>イージング関数のデモ</h3>
          <div class="box-container" style="height: 250px">
            <div class="box" id="ease-box1" style="top: 25px"></div>
            <div class="box box-red" id="ease-box2" style="top: 75px"></div>
            <div class="box box-green" id="ease-box3" style="top: 125px"></div>
            <div class="box box-orange" id="ease-box4" style="top: 175px"></div>
          </div>

          <div class="controls">
            <button id="ease-none">直線 (none)</button>
            <button id="ease-out">減速 (power2.out)</button>
            <button id="ease-in">加速 (power2.in)</button>
            <button id="ease-inout">加減速 (power2.inOut)</button>
            <button id="ease-bounce">バウンス (bounce)</button>
            <button id="ease-elastic">弾性 (elastic)</button>
            <button id="reset-ease">リセット</button>
          </div>

          <h4>イージングのコード</h4>
          <pre><code class="language-javascript" id="ease-code">// 直線 (一定速度)
gsap.to("#ease-box1", { x: 300, duration: 2, ease: "none" });

// 減速 (最初が速く、最後がゆっくり)
gsap.to("#ease-box2", { x: 300, duration: 2, ease: "power2.out" });

// 加速 (最初がゆっくり、最後が速く)
gsap.to("#ease-box3", { x: 300, duration: 2, ease: "power2.in" });

// 加減速 (最初と最後がゆっくり、中間が速い)
gsap.to("#ease-box4", { x: 300, duration: 2, ease: "power2.inOut" });</code><button class="copy-button">コピー</button></pre>
        </div>

        <h3>主なイージング関数</h3>
        <ul>
          <li><code>"none"</code>: 一定速度（線形）</li>
          <li><code>"power1"</code>、<code>"power2"</code>、<code>"power3"</code>、<code>"power4"</code>: 指数関数的な変化</li>
          <li><code>"back"</code>: 少し行き過ぎてから戻る</li>
          <li><code>"elastic"</code>: 弾性のある動き</li>
          <li><code>"bounce"</code>: バウンドする動き</li>
          <li><code>"steps(n)"</code>: n段階のステップ状の変化</li>
        </ul>

        <h3>イージングの変化タイプ</h3>
        <ul>
          <li><code>"power2.in"</code>: 始めはゆっくり、徐々に加速</li>
          <li><code>"power2.out"</code>: 始めは速く、徐々に減速</li>
          <li><code>"power2.inOut"</code>: 始めと終わりがゆっくりで、中間が速い</li>
        </ul>
      </div>

      <!-- まとめ -->
      <div class="section">
        <h2>GSAPの基本構文まとめ</h2>
        <ol>
          <li><strong>gsap.to()</strong>: 現在状態から指定した状態へアニメーション</li>
          <li><strong>gsap.from()</strong>: 指定した状態から現在状態へアニメーション</li>
          <li><strong>gsap.fromTo()</strong>: 指定した開始状態から終了状態へアニメーション</li>
          <li><strong>gsap.timeline()</strong>: 複数のアニメーションをシーケンスで実行</li>
          <li><strong>イージング関数</strong>: アニメーションの速度変化パターンを制御</li>
        </ol>

        <p> これらの基本を組み合わせることで、様々な動きを表現できます。 実際に手を動かして試してみることが上達の近道です。 </p>
      </div>

      <div class="next-step">
        <h2>次のステップ</h2>
        <p>実践的な例を見てみましょう：<a href="../05_examples/01_button_hover.html">ボタンホバー効果を見る</a></p>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js" defer></script>
    <script src="../common.js" defer></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // コピーボタンの機能追加
        document.querySelectorAll(".copy-button").forEach((button) => {
          button.addEventListener("click", function () {
            const code = this.previousSibling.textContent;
            navigator.clipboard.writeText(code).then(() => {
              const originalText = this.textContent;
              this.textContent = "コピーしました！";
              setTimeout(() => {
                this.textContent = originalText;
              }, 2000);
            });
          });
        });

        // gsap.to() デモ
        document.getElementById("run-to").addEventListener("click", function () {
          gsap.to("#to-box", {
            x: 300,
            rotation: 360,
            backgroundColor: "#e74c3c",
            duration: 2,
            ease: "power2.out",
          });
        });

        document.getElementById("reset-to").addEventListener("click", function () {
          gsap.to("#to-box", {
            x: 0,
            rotation: 0,
            backgroundColor: "#3498db",
            duration: 0.5,
          });
        });

        // gsap.from() デモ
        document.getElementById("run-from").addEventListener("click", function () {
          gsap.from("#from-box", {
            x: -100,
            y: -50,
            opacity: 0,
            scale: 0.5,
            rotation: -180,
            duration: 2,
            ease: "power2.out",
          });
        });

        document.getElementById("reset-from").addEventListener("click", function () {
          gsap.set("#from-box", {
            x: 0,
            y: 0,
            opacity: 1,
            scale: 1,
            rotation: 0,
          });
        });

        // gsap.fromTo() デモ
        document.getElementById("run-fromto").addEventListener("click", function () {
          gsap.fromTo(
            "#fromto-box",
            // 開始状態
            {
              x: -100,
              y: -50,
              opacity: 0,
              backgroundColor: "#9b59b6",
            },
            // 終了状態
            {
              x: 300,
              y: 0,
              opacity: 1,
              backgroundColor: "#2ecc71",
              duration: 2,
              ease: "power2.inOut",
            }
          );
        });

        document.getElementById("reset-fromto").addEventListener("click", function () {
          gsap.to("#fromto-box", {
            x: 0,
            y: 0,
            opacity: 1,
            backgroundColor: "#3498db",
            duration: 0.5,
          });
        });

        // タイムライン デモ
        document.getElementById("run-timeline").addEventListener("click", function () {
          const tl = gsap.timeline({
            defaults: {
              duration: 1,
              ease: "power2.out",
            },
          });

          tl.to("#timeline-box1", { x: 300 }).to("#timeline-box2", { x: 300, y: 30 }, "-=0.5").to("#timeline-box3", { x: 300, rotation: 360 }, "<");
        });

        document.getElementById("reset-timeline").addEventListener("click", function () {
          gsap.to(["#timeline-box1", "#timeline-box2", "#timeline-box3"], {
            x: 0,
            y: 0,
            rotation: 0,
            duration: 0.5,
          });
        });

        // イージング デモ
        const runEase = (easingType) => {
          gsap.to("#ease-box1", { x: 300, duration: 2, ease: "none" });

          switch (easingType) {
            case "none":
              gsap.to(["#ease-box2", "#ease-box3", "#ease-box4"], { x: 300, duration: 2, ease: "none" });
              break;

            case "out":
              gsap.to(["#ease-box2", "#ease-box3", "#ease-box4"], { x: 300, duration: 2, ease: "power2.out" });
              break;

            case "in":
              gsap.to(["#ease-box2", "#ease-box3", "#ease-box4"], { x: 300, duration: 2, ease: "power2.in" });
              break;

            case "inout":
              gsap.to(["#ease-box2", "#ease-box3", "#ease-box4"], { x: 300, duration: 2, ease: "power2.inOut" });
              break;

            case "bounce":
              gsap.to(["#ease-box2", "#ease-box3", "#ease-box4"], { x: 300, duration: 2, ease: "bounce.out" });
              break;

            case "elastic":
              gsap.to(["#ease-box2", "#ease-box3", "#ease-box4"], { x: 300, duration: 2, ease: "elastic.out(1,0.3)" });
              break;
          }
        };

        document.getElementById("ease-none").addEventListener("click", function () {
          runEase("none");
        });

        document.getElementById("ease-out").addEventListener("click", function () {
          runEase("out");
        });

        document.getElementById("ease-in").addEventListener("click", function () {
          runEase("in");
        });

        document.getElementById("ease-inout").addEventListener("click", function () {
          runEase("inout");
        });

        document.getElementById("ease-bounce").addEventListener("click", function () {
          runEase("bounce");
        });

        document.getElementById("ease-elastic").addEventListener("click", function () {
          runEase("elastic");
        });

        document.getElementById("reset-ease").addEventListener("click", function () {
          gsap.to(["#ease-box1", "#ease-box2", "#ease-box3", "#ease-box4"], {
            x: 0,
            duration: 0.5,
          });
        });
      });
    </script>
  </body>
</html>
