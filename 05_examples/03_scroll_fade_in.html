<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GSAPスクロールフェードイン</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />
    <style>
      /* ページ内追加スタイル */
      .scroll-guide {
        position: fixed;
        right: 20px;
        bottom: 20px;
        background-color: rgba(52, 152, 219, 0.8);
        color: white;
        padding: 10px 15px;
        border-radius: 5px;
        font-size: 14px;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      }

      .section-number {
        display: inline-block;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-color: #3498db;
        color: white;
        text-align: center;
        line-height: 30px;
        margin-right: 10px;
      }

      .section {
        border-left: 4px solid #3498db;
        padding-left: 20px;
      }

      .demo-highlight {
        background: linear-gradient(90deg, rgba(52, 152, 219, 0.1) 0%, rgba(52, 152, 219, 0.2) 100%);
        border-radius: 5px;
        padding: 5px 10px;
        margin: 5px 0;
        display: inline-block;
      }

      .image-placeholder {
        position: relative;
      }

      .image-placeholder::after {
        content: "フェードイン要素";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #fff;
        font-weight: bold;
      }

      .code-display {
        display: block;
        white-space: pre;
        padding: 15px;
        background-color: #f8f8f8;
        border-radius: 5px;
        overflow-x: auto;
        line-height: 1.5;
      }

      .code-block {
        margin: 15px 0;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      pre {
        margin: 0;
        padding: 0;
        border-radius: 5px;
        max-height: 400px;
        overflow: auto;
      }

      code {
        font-family: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace;
        font-size: 14px;
      }

      .inline-code {
        background-color: #f5f5f5;
        padding: 2px 5px;
        border-radius: 3px;
        font-family: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace;
        font-size: 0.9em;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>スクロールでフェードイン</h1>
    </header>

    <nav>
      <ul>
        <li><a href="../index.html">ホーム</a></li>
        <li><a href="../01_introduction/index.html">概要</a></li>
        <li><a href="../02_benefits/index.html">メリット</a></li>
        <li><a href="../03_good_animation/index.html">良いアニメーション</a></li>
        <li><a href="../04_basic_syntax/index.html">基本構文と例</a></li>
        <li class="dropdown">
          <a href="#">コードサンプル</a>
          <div class="dropdown-content">
            <a href="../05_examples/01_button_hover.html">ボタンホバー</a>
            <a href="../05_examples/02_timeline_sequence.html">タイムライン</a>
            <a href="../05_examples/03_scroll_fade_in.html" class="active">スクロールフェード</a>
            <a href="../05_examples/04_scroll_progress.html">スクロール連動</a>
            <a href="../05_examples/05_stagger_animation.html">スタッガー</a>
            <a href="../05_examples/06_corporate_site.html">コーポレートサイト</a>
          </div>
        </li>
      </ul>
    </nav>

    <div class="container">
      <div class="introduction">
        <h2>ScrollTriggerについて</h2>
        <p>ScrollTriggerは、GSAPのプラグインで、スクロール位置に応じたアニメーションを簡単に実装できます。このサンプルでは、ページをスクロールすると要素が下からフェードインしてくる基本的な効果を実装しています。</p>
        <p>下にスクロールして、各セクションがどのようにアニメーションするか確認してみてください。<span class="demo-highlight">各セクションはスクロールに合わせて順番に表示されます</span>。</p>
      </div>

      <div class="section section1">
        <h2><span class="section-number">1</span>フェードイン基本効果</h2>
        <p>このセクションがビューポートに入ると、下から上にスライドしながらフェードインします。ScrollTriggerプラグインを使用することで、スクロール位置をトリガーにしたアニメーションを簡単に実装できます。</p>
        <div class="image-placeholder" role="img" aria-label="フェードインアニメーション要素1"></div>
        <p>各セクションは個別にトリガーが設定されているため、スクロールするたびに次々と要素が表示されていきます。</p>
      </div>

      <div class="section section2">
        <h2><span class="section-number">2</span>トリガー設定の理解</h2>
        <p>このサンプルでは、<span class="demo-highlight">gsap.to()</span> メソッドを使用して、「最初は透明で下にある状態から、通常の位置と不透明度に変化する」アニメーションを定義しています。</p>
        <div class="image-placeholder" role="img" aria-label="フェードインアニメーション要素2"></div>
        <p>ScrollTriggerの設定では、<span class="demo-highlight">start: "top 80%"</span> として「要素の上端がビューポートの下から20%の位置に来たとき」にアニメーションを開始するよう指定しています。</p>
      </div>

      <div class="section section3">
        <h2><span class="section-number">3</span>コードの解説</h2>
        <p>GSAPの特徴として、複数のプロパティを同時にアニメーションさせることができます。このサンプルでは、透明度（opacity）と位置（y）を同時に変化させています。</p>
        <div class="code-block">
          <pre><code class="language-javascript">// スクロールフェードイン効果
gsap.to(section, {
  opacity: 1,        // 不透明に
  y: 0,              // 通常位置に
  duration: 0.8,     // 0.8秒かけて
  ease: "power2.out",  // イージング
  scrollTrigger: {
    trigger: section,    // この要素がトリガー
    start: "top 80%",    // ビューポートの下から20%の位置
    toggleActions: "play none none none"
    // markers: true     // デバッグ用マーカー
  }
});</code></pre>
        </div>
        <p>上記のコードでは、<span class="inline-code">scrollTrigger</span>オブジェクトを使って、スクロール位置に基づくトリガーを設定しています。<span class="inline-code">toggleActions</span>パラメータでは、要素が表示されたときの動作を指定できます。</p>
      </div>

      <div class="section section4">
        <h2><span class="section-number">4</span>ScrollTriggerオプション</h2>
        <p>ScrollTriggerには様々な設定オプションがあります。例えば：</p>
        <ul>
          <li><strong>start/end</strong>: アニメーションの開始/終了位置</li>
          <li><strong>toggleActions</strong>: スクロール方向に応じたアクション設定</li>
          <li><strong>scrub</strong>: スクロール量にアニメーションを同期させる</li>
          <li><strong>pin</strong>: 要素を画面に固定する</li>
        </ul>
        <p>より高度なアニメーションを作る場合は、これらのオプションを組み合わせることで様々な表現が可能になります。<span class="demo-highlight">このページでは基本的なトリガー設定のみを使用していますが、他のサンプルページでさらに複雑な実装を確認できます。</span></p>
      </div>

      <div class="section section5">
        <h2><span class="section-number">5</span>実践的なヒント</h2>
        <p>ScrollTriggerを使いこなすコツは、まず基本的な機能を理解し、少しずつ複雑な表現に挑戦していくことです。この例のようなシンプルなフェードイン効果から始めて、徐々に発展させていくとよいでしょう。</p>
        <div class="image-placeholder" role="img" aria-label="フェードインアニメーション要素3"></div>
        <p>次のステップとして、スクロール量に応じて動きが変わる<a href="04_scroll_progress.html" class="demo-highlight">スクラブ効果</a>や、複数要素の連携アニメーションなどに挑戦してみてください。</p>
      </div>

      <div class="introduction">
        <h2>ScrollTriggerを活用するポイント</h2>
        <ol>
          <li><strong>ユーザー体験を考慮する</strong>: アニメーションはコンテンツを引き立てるためのものです。派手すぎるアニメーションはユーザー体験を損なう可能性があります。</li>
          <li><strong>パフォーマンスに注意</strong>: 多数の要素に重いアニメーションを設定すると、パフォーマンスが低下する可能性があります。</li>
          <li><strong>レスポンシブ対応</strong>: 様々な画面サイズでも適切に動作するよう設計しましょう。</li>
          <li><strong>アクセシビリティを忘れない</strong>: 過剰なアニメーションは一部のユーザーにとって問題となる場合があります。</li>
        </ol>
        <p>スクロールトリガーを使ったアニメーションは、適切に使用することで、ユーザーの注目を引き、情報の理解を助ける効果的なツールとなります。</p>
      </div>

      <div class="next-step">
        <h2>次のステップ</h2>
        <p>より高度なスクロール連動アニメーションについて学びましょう：<a href="04_scroll_progress.html">スクロール連動アニメーション</a></p>
      </div>
    </div>

    <footer>
      <p>GSAP勉強会サンプル - ScrollTriggerデモ</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js" defer></script>
    <script src="../common.js" defer></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // ScrollTriggerプラグインを登録
        gsap.registerPlugin(ScrollTrigger);

        // 各セクションを初期状態で非表示にする
        gsap.set(".section", { opacity: 0, y: 50 });

        // 各セクションに対してフェードインアニメーションを設定
        gsap.utils.toArray(".section").forEach((section, i) => {
          // 各セクションを下から上にフェードイン
          gsap.to(section, {
            opacity: 1,
            y: 0,
            duration: 0.8,
            ease: "power2.out",
            scrollTrigger: {
              trigger: section, // この要素がトリガー
              start: "top 80%", // 要素の上端がビューポートの80%位置に来たら開始
              // end: "top 20%",         // オプションの終了位置
              toggleActions: "play none none none", // スクロール方向に応じた動作設定
              markers: true           // デバッグ用マーカー（開発時に便利）
            },
          });
        });

        // スクロールガイドのフェードアウト
        window.addEventListener("scroll", function () {
          if (window.scrollY > 300) {
            document.querySelector(".scroll-guide").style.opacity = "0.3";
          } else {
            document.querySelector(".scroll-guide").style.opacity = "1";
          }
        });
      });
    </script>
  </body>
</html>
