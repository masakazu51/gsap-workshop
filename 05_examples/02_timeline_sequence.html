<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GSAPタイムラインシーケンス</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" />
    <style>
      .demo-container {
        position: relative;
        width: 100%;
        display: flex;
        flex-direction: column;
        margin: 30px 0;
      }

      .animation-container {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
      }

      .box {
        width: 100px;
        height: 100px;
        margin: 0 10px;
        background-color: #3498db;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        font-weight: bold;
      }

      .box1 {
        background-color: #3498db;
      }
      .box2 {
        background-color: #2ecc71;
      }
      .box3 {
        background-color: #e74c3c;
      }
      .box4 {
        background-color: #f39c12;
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-top: 20px;
      }

      .control-btn {
        padding: 8px 15px;
        background-color: #34495e;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
      }

      .control-btn:hover {
        background-color: #2c3e50;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>タイムラインシーケンス</h1>
      <p>GSAPのタイムラインを使った連続アニメーション</p>
    </header>

    <nav>
      <ul>
        <li><a href="../index.html">ホーム</a></li>
        <li><a href="../01_introduction/01_introduction.html">概要</a></li>
        <li><a href="../02_benefits/02_benefits.html">メリット</a></li>
        <li><a href="../03_good_animation/03_good_animation.html">良いアニメーション</a></li>
        <li><a href="../04_basic_syntax/04_basic_syntax.html">基本構文と例</a></li>
        <li><a href="../05_examples/01_button_hover.html">ボタンホバー</a></li>
        <li><a href="../05_examples/02_timeline_sequence.html">タイムライン</a></li>
        <li><a href="../05_examples/03_scroll_fade_in.html">スクロールフェード</a></li>
        <li><a href="../05_examples/04_scroll_progress.html">スクロール連動</a></li>
        <li><a href="../05_examples/05_stagger_animation.html">スタッガー</a></li>
      </ul>
    </nav>

    <div class="content">
      <div class="introduction">
        <h2>GSAPタイムラインについて</h2>
        <p>タイムラインを使うと、複数のアニメーションを連続して実行したり、重ねたりすることができます。このデモでは、4つのボックスを順番にアニメーションさせるタイムラインを実装しています。</p>
      </div>

      <div class="demo-container">
        <div class="animation-container">
          <div class="box box1">Box 1</div>
          <div class="box box2">Box 2</div>
          <div class="box box3">Box 3</div>
          <div class="box box4">Box 4</div>
        </div>

        <div class="controls">
          <button class="control-btn play-btn">再生</button>
          <button class="control-btn pause-btn">一時停止</button>
          <button class="control-btn resume-btn">再開</button>
          <button class="control-btn reverse-btn">逆再生</button>
          <button class="control-btn restart-btn">最初から</button>
        </div>
      </div>

      <div class="introduction">
        <h2>タイムラインの実装方法</h2>
        <p>GSAPのタイムラインは、<code class="inline-code">gsap.timeline()</code>メソッドで作成します。タイムラインにアニメーションを追加することで、時間順に実行されるシーケンスを構築できます。</p>
      </div>

      <div class="code-block">
        <pre><code class="language-javascript">// タイムラインを作成
const tl = gsap.timeline({
  defaults: {
    duration: 0.7,
    ease: "power1.inOut"
  },
  paused: true // 自動再生しない
});

// アニメーションをタイムラインに追加
tl.to(".box1", { x: 100, rotation: 360 })
  .to(".box2", { y: -50, scale: 1.2 }, "-=0.4") // 0.4秒オーバーラップ
  .to(".box3", { x: -100, backgroundColor: "#9b59b6" }, "+=0.2") // 0.2秒遅延
  .to(".box4", { y: 50, rotation: -180, scale: 0.8 });

// 再生ボタン
playBtn.addEventListener("click", () => {
  tl.play();
});

// 一時停止ボタン
pauseBtn.addEventListener("click", () => {
  tl.pause();
});

// 再開ボタン
resumeBtn.addEventListener("click", () => {
  tl.resume();
});

// 逆再生ボタン
reverseBtn.addEventListener("click", () => {
  tl.reverse();
});

// 最初からボタン
restartBtn.addEventListener("click", () => {
  tl.restart();
});</code></pre>
      </div>

      <div class="introduction">
        <h2>タイムラインの重要なポイント</h2>
        <ul>
          <li><strong>位置パラメータ</strong> - <code class="inline-code">"-=0.4"</code>や<code class="inline-code">"+=0.2"</code>などを使うことで、アニメーション間の重なりや遅延を調整できます。</li>
          <li
            ><strong>制御メソッド</strong> - <code class="inline-code">play()</code>, <code class="inline-code">pause()</code>, <code class="inline-code">resume()</code>, <code class="inline-code">reverse()</code>,
            <code class="inline-code">restart()</code>などのメソッドでタイムラインを制御できます。</li
          >
          <li><strong>デフォルト設定</strong> - タイムライン作成時に<code class="inline-code">defaults</code>を設定すると、すべてのアニメーションに共通の設定を適用できます。</li>
          <li><strong>ラベル</strong> - <code class="inline-code">tl.add("labelName")</code>を使ってタイムライン上に名前付きポイントを作成し、そこにジャンプすることもできます。</li>
        </ul>
      </div>

      <div class="introduction">
        <h2>実験してみよう</h2>
        <p>このコードを元に、次のようなバリエーションを試してみてください：</p>
        <ul>
          <li>アニメーションの順序を変更する</li>
          <li>新しいプロパティや効果を追加する</li>
          <li>タイムラインに繰り返し設定（<code class="inline-code">repeat</code>）を追加する</li>
          <li>ヨーヨー効果（<code class="inline-code">yoyo: true</code>）を試す</li>
          <li>異なるイージング関数を適用する</li>
        </ul>
      </div>
    </div>

    <footer>
      <p>GSAP勉強会サンプル - タイムラインシーケンスデモ</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js" defer></script>
    <script src="../common.js" defer></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // ボタン要素を取得
        const playBtn = document.querySelector(".play-btn");
        const pauseBtn = document.querySelector(".pause-btn");
        const resumeBtn = document.querySelector(".resume-btn");
        const reverseBtn = document.querySelector(".reverse-btn");
        const restartBtn = document.querySelector(".restart-btn");

        // タイムラインを作成
        const tl = gsap.timeline({
          defaults: {
            duration: 0.7,
            ease: "power1.inOut",
          },
          paused: true, // 自動再生しない
        });

        // アニメーションをタイムラインに追加
        tl.to(".box1", { x: 100, rotation: 360 })
          .to(".box2", { y: -50, scale: 1.2 }, "-=0.4") // 0.4秒オーバーラップ
          .to(".box3", { x: -100, backgroundColor: "#9b59b6" }, "+=0.2") // 0.2秒遅延
          .to(".box4", { y: 50, rotation: -180, scale: 0.8 });

        // 再生ボタン
        playBtn.addEventListener("click", () => {
          tl.play();
        });

        // 一時停止ボタン
        pauseBtn.addEventListener("click", () => {
          tl.pause();
        });

        // 再開ボタン
        resumeBtn.addEventListener("click", () => {
          tl.resume();
        });

        // 逆再生ボタン
        reverseBtn.addEventListener("click", () => {
          tl.reverse();
        });

        // 最初からボタン
        restartBtn.addEventListener("click", () => {
          tl.restart();
        });
      });
    </script>
  </body>
</html>
